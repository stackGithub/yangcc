<template>  <vue-easy-print tableShow ref="easyPrint" >    <div id="printModel" class="c_p_n c_box c_auto_y">      <h2 class="c_center">{{ headerTableSelectionData.purpose }}</h2>      <!--其他信息-->      <div class="c_m_t_n c_flex c_flex_between">        <div>部门： {{headerTableSelectionData.deptname}}</div>        <div>单据编号： {{headerTableSelectionData.vbillno}}</div>        <div>单据日期： {{headerTableSelectionData.dbilldate}}</div>        <div>单位：元</div>      </div>      <!--表体-->      <div class="c_m_t_n">        <el-table          size="small"          border          show-summary          :summary-method="getSummaries"          :data="tableBodyData"        >          <template v-for="(item, i) in tableBodyParam.list">            <el-table-column v-if="item.key === 'rowno'" :key="i" :width="item.width" :label="item.name" :prop="item.key">              <template slot-scope="scope">                {{ scope.$index + 1}}              </template>            </el-table-column>            <el-table-column v-else :key="i" :width="item.width" :label="item.name" :prop="item.key"></el-table-column>          </template>        </el-table>      </div>      <!--其他信息-->      <div class="c_m_t_n c_flex c_flex_between">        <div>部门负责人： </div>        <div>财务审核人： </div>        <div>财务负责人： </div>        <div>分管副院长： </div>        <div>院长： </div>        <div>经办人： <pre>                              </pre></div>      </div>    </div>  </vue-easy-print></template><script>  import vueEasyPrint from "vue-easy-print";  export default {    name: "labourServicesPrint",    components: { vueEasyPrint },    data() {      return {        visible: true,        // 表体参数        // -- 表格参数        tableBodyParam: {          list: [            //序号	姓名	银行卡号	开户行	联行号	应发	税率	税额	实发	备注 人员档案主键	人员银行账户主键            { name: '序号', key: 'rowno', isUse: true },            { name: '姓名', key: 'name', isUse: true },            { name: '职称', key: 'def2', isUse: true },            { name: '单位名称', key: 'def3', width: 90, isUse: true },            { name: '项目', key: 'def4name', isUse: true },            { name: '身份证', key: 'idcard', width: 142, isUse: true },            { name: '银行卡号', key: 'banknum', width: 148, isUse: true },            { name: '开户行', key: 'crtbank', width: 260, isUse: true },            { name: '联行号', key: 'combinenum', width: 120, isUse: true },            { name: '手机号', key: 'def5', width: 120, isUse: true },            { name: '应发', key: 'should', width: 100, isUse: true },            { name: '税额', key: 'ntax', width: 100, isUse: true },            { name: '实发', key: 'reality', width: 100, isUse: true },            { name: '工作内容及工作量', key: 'def6', width: 200, isUse: true },            { name: '备注', key: 'memo', width: 200, isUse: true },          ]        },        headerTableSelectionData: {}      }    },    created() {      let tableBodyData = sessionStorage['tableBodyData']      let headerTableSelectionData = sessionStorage['headerTableSelectionData']      this.tableBodyData = JSON.parse(tableBodyData);      this.headerTableSelectionData = JSON.parse(headerTableSelectionData);      // this.tableBodyData = JSON.parse(this.$route.query.tableBodyData);      // this.headerTableSelectionData = JSON.parse(this.$route.query.headerTableSelectionData);    },    mounted() {      // window.print();//调用打印的窗口      this.printView()    },    methods: {      open(tableBodyData, headerTableSelectionData) {        this.tableBodyData = tableBodyData;        this.headerTableSelectionData = headerTableSelectionData;        this.visible = true      },      cancel() {        this.tableBodyData = [];        this.headerTableSelectionData = {};        this.visible = false      },      // 表体合计      getSummaries(param) {        const { columns, data } = param;        const sums = [];        columns.forEach((column, index) => {          if (index === 0) {            sums[index] = '合计';            return;          }          if (![10, 11, 12].includes(index)) {            return;          }          const values = data.map(item => Number(item[column.property]));          if (!values.every(value => isNaN(value))) {            sums[index] = values.reduce((prev, curr) => {              const value = Number(curr);              if (!isNaN(value)) {                return prev + curr;              } else {                return prev;              }            }, 0);            sums[index] = sums[index].toFixed(2)            sums[index] += ' 元';          } else {            sums[index] = '';          }          // 实发金额          if (index === 12 && this.headerState==='add') {            this.headerTableSelectionData.amount = parseFloat(sums[12]) || ''          }        });        return sums;      },      // 打印      printView() {        this.$nextTick(() => {          this.$refs.easyPrint.print()        })      }    }  }</script><style media=print>  #printModel{page-break-after: always;}</style><style scoped></style>